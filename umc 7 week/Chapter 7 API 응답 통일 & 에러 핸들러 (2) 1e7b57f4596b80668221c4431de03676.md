# ğŸ¯ í•µì‹¬ í‚¤ì›Œë“œ

---

<aside>
ğŸ’¡ ì£¼ìš” ë‚´ìš©ë“¤ì— ëŒ€í•´ ì¡°ì‚¬í•´ë³´ê³ , ìì‹ ë§Œì˜ ìƒê°ì„ í†µí•´ ì •ë¦¬í•´ë³´ì„¸ìš”!
ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ê³ í•˜ì—¬ ì •ì˜, ì†ì„±, ì¥ë‹¨ì  ë“±ì„ ì ì–´ì£¼ì…”ë„ ë©ë‹ˆë‹¤.
ì¡°ì‚¬ëŠ” ê³µì‹ í™ˆí˜ì´ì§€ **Best**, ë¸”ë¡œê·¸(ìµœì‹  ë‚ ì§œ) **Not Bad**

</aside>

<aside>
ğŸ¤— ì—¬ëŸ¬ë¶„ë“¤ì´ **ì§ì ‘** ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” í‚¤ì›Œë“œë¥¼ ì¡°ì‚¬í•´ë³´ì„¸ìš”!

</aside>

- RestContollerAdvice
    
    ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ ì—ëŸ¬ í™”ë©´
    
    ![image.png](image.png)
    
    ì´ë ‡ê²Œ ì—ëŸ¬ í™”ë©´ì´ ëœ¨ë©´  ì´ìš©ìë“¤ì´ ì•±ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ë¶ˆí¸í•¨ì„ ê²ªëŠ”ë‹¤.
    
    í•˜ì§€ë§Œ ìŠ¤í”„ë§ì—ì„œ`@ExceptionHandler`Â ì‚¬ìš©í•¨ìœ¼ë¡œì„œ ì¥ì ì€ ì‚¬ìš©í•˜ë©´ HttpServletRequestë‚˜ WebRequest ë“±ì„ ì–»ì„ ìˆ˜ ìˆìœ¼ë©° ë°˜í™˜ íƒ€ì…ìœ¼ë¡œëŠ” ResponseEntity, String, void ë“± ììœ ë¡­ê²Œ í™œìš©í•  ìˆ˜ ìˆìŒ.
    
    ì˜ˆì‹œì½”ë“œ
    
    ```java
    @GetMapping("/posts")
    public String posts(){
    	int exception = 4/0;
    	return "posts";
    }
    
    @ExceptionHandler(ArithmeticException.class)
    public ResponseEntity<String> handleNoSuchElementFoundException(ArithmeticException exception) {
    	return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(exception.getMessage());
    }
    ```
    
    ![image.png](image%201.png)
    
    ì°¸ê³ ìë£Œ [ì—¬ê¸°](https://velog.io/@woosim34/RestControllerAdvice%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC)
    
- lombok
    
    ì •ì˜ : ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ì½”ë“œë¥¼ ìë™ì™„ì„± í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.
    
    Getter, Setter, Equlas, ToString ê°™ì€ ì½”ë“œë¥¼ ìë™ì™„ì„± ì‹œì¼œì¤Œìœ¼ë¡œì¨
    
    ì½”ë“œë¥¼ ë§¤ìš° ë‹¨ìˆœí™” ì‹œí‚¬ ìˆ˜ ìˆìŒ.
    
    - ì¥ì 
        - ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì½”ë“œ ìë™ ìƒì„±ì„ í†µí•œ ìƒì‚°ì„± í–¥ìƒ
        - ë°˜ë³µë˜ëŠ” ì½”ë“œ ë‹¤ì´ì–´íŠ¸ë¥¼ í†µí•œ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
        - Getter, Setter ì™¸ì— ë¹Œë” íŒ¨í„´ì´ëƒ ë¡œê·¸ ìƒì„± ë“± ë‹¤ì–‘í•œ ë°©ë©´ìœ¼ë¡œ í™œìš© ê°€ëŠ¥
        
        ë§ì´ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì— ëŒ€í•´ ì¡°ì‚¬í•´ë³´ê² ìŠµë‹ˆë‹¤
        
    - `@Getter, @Setter`  : ëª¨ë“  ë³€ìˆ˜ë“¤ì— ëŒ€í•´ ì ìš©ì‹œí‚¤ëŠ”ê²ƒ, ë˜í•œ ë³€ìˆ˜ ì´ë¦„ ìœ„ì— ì ìš©ì‹œí‚¤ë©´ í•´ë‹¹ ë³€ìˆ˜ë§Œ ì ìš© ê°€ëŠ¥.
    - `@AllArgsConstructor` : ëª¨ë“  ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ìƒì„±ìë¥¼ ìë™ì™„ì„± ì‹œì¼œì£¼ëŠ” ì–´ë…¸ì—í‹°ì…˜
    - `@NoArgsConstructor` : ì–´ë– í•œ ë³€ìˆ˜ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ ìë™ì™„ì„± ì‹œì¼œì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
    - `@RequiredArgsConstructor`  : íŠ¹ì • ë³€ìˆ˜ë§Œì„ í™œìš©í•˜ëŠ” ìƒì„±ìë¥¼ ìë™ì™„ì„± ì‹œì¼œì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
    - `@EqualsAndHashCode`  : í´ë˜ìŠ¤ì— ëŒ€í•œ equals í•¨ìˆ˜ì™€ hashCode í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤.
    - `@ToString` : í´ë˜ìŠ¤ì˜ ë³€ìˆ˜ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ ToString ë©”ì†Œë“œë¥¼ ìë™ì™„ì„±ì‹œì¼œì¤€ë‹¤
    - `@Data`  : ì˜ ì•ˆì“°ë‹ˆ íŒ¨ìŠ¤
    - `@Builder` : í•´ë‹¹ í´ë˜ìŠ¤ì˜ ê°ì²´ì˜ ìƒì„±ì— Builder íŒ¨í„´ì„ ì ìš©ì‹œì¼œì¤€ë‹¤
    - `@Delegate` : í•œ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ ë‹¤ë¥¸ ê°ì²´ë¡œ ìœ„ì„ì‹œì¼œì¤€ë‹¤.

# ğŸ“¢Â í•™ìŠµ í›„ê¸°

---

- ì´ë²ˆ ì£¼ì°¨ ì›Œí¬ë¶ì„ í•´ê²°í•´ë³´ë©´ì„œ ì–´ë• ëŠ”ì§€ íšŒê³ í•´ë´…ì‹œë‹¤.
- í•µì‹¬ í‚¤ì›Œë“œì— ëŒ€í•´ ì™„ë²½í•˜ê²Œ ì´í•´í–ˆëŠ”ì§€? í˜¹ì‹œ ì´í•´ê°€ ì•ˆ ë˜ëŠ” ë¶€ë¶„ì€ ë­ì˜€ëŠ”ì§€?

<aside>
ğŸ’¡

</aside>

# âš ï¸Â ìŠ¤í„°ë”” ì§„í–‰ ë°©ë²•

---

1. ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ê¸° ì „, ì›Œí¬ë¶ ë‚´ìš©ë“¤ì„ ëª¨ë‘ ì±„ìš°ê³  ìŠ¤í„°ë””ì—ì„œëŠ” ì„œë¡œ ëª¨ë¥´ëŠ” ë‚´ìš©ë“¤ì„ ê³µìœ í•´ì£¼ì„¸ìš”.
2. ë¯¸ì…˜ì€ ì›Œí¬ë¶ ë‚´ìš©ë“¤ì„ ëª¨ë‘ ì™„ë£Œí•˜ê³  ë‚˜ì„œ ìŠ¤í„°ë”” ì „/í›„ë¡œ ì§„í–‰í•´ë³´ì„¸ìš”.
3. ë‹¤ìŒì£¼ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ê¸° ì „, ì§€ë‚œì£¼ ë¯¸ì…˜ì„ ì„œë¡œ ê³µìœ í•´ì„œ ìƒí˜¸ í”¼ë“œë°±ì„ ì§„í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

# ğŸ”¥Â ë¯¸ì…˜

---

### [UMC ì„œë²„ ì›Œí¬ë¶ ì°¸ê³  ìë£Œ](https://github.com/CYY1007/UMC_SERVER_WORKBOOK.git)

[GitHub - chock-cho/UMC-7th-spring-workbook at feature-week7-workbook](https://github.com/chock-cho/UMC-7th-spring-workbook/tree/feature-week7-workbook)

---

1. ìœ„ì˜ ë§í¬, ê·¸ë¦¬ê³  ì›Œí¬ë¶ì„ ë³´ë©° API ì‘ë‹µ í†µì¼ê³¼ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ ìˆ™ì§€í•˜ê¸°.
2. **ë°˜ë“œì‹œ** ë³¸ì¸ ì†ìœ¼ë¡œ ì²˜ìŒë¶€í„° ëê¹Œì§€ ë‹¤ í•´ë³´ê³  ìƒˆ ë¦¬í¬ì§€í† ë¦¬ í˜¹ì€ 7ì£¼ì°¨ ë¦¬í¬ì§€í† ë¦¬ì— ìƒˆ ë¸Œëœì¹˜ì— push í›„ í•´ë‹¹ ë§í¬ë¥¼ ë¯¸ì…˜ ê¸°ë¡ì§€ì— ì œì¶œí•  ê²ƒ.
3. ë¯¸ì…˜ ì§„í–‰ ì‹œ ë°˜ë“œì‹œ ì¤‘ê°„ ì¤‘ê°„ **ê³¼ì • ì¸ì¦ìƒ·**ì„ ë‚¨ê¸¸ ê²ƒ.
4. â—**í•„ìˆ˜**â— ****RestControllerAdviceì˜ ì¥ì , ê·¸ë¦¬ê³  ì—†ì„ ê²½ìš° ì–´ë–¤ ì ì´ ë¶ˆí¸í•œì§€ë„ ì¡°ì‚¬í•˜ì—¬ **ë¯¸ì…˜ ê¸°ë¡ë€**ì— ìˆ˜ë¡í•  ê²ƒ.
5. â—**í•„ìˆ˜**â— **ë¯¸ì…˜ ëª©ë¡ ì¡°íšŒ(ì§„í–‰ì¤‘, ì§„í–‰ ì™„ë£Œ) API ëª…ì„¸ì„œ** ì‘ì„±í•˜ê¸° (ì´ë¯¸ ì‘ì„±ë˜ì–´ ìˆìœ¼ë©´ ìƒê´€ ì—†ìŒ!)

# ğŸ’ªÂ ë¯¸ì…˜ ê¸°ë¡

---

<aside>
ğŸ€ ë¯¸ì…˜ ê¸°ë¡ì˜ ê²½ìš°, ì•„ë˜ ë¯¸ì…˜ ê¸°ë¡ í† ê¸€ ì†ì— ì‘ì„±í•˜ì‹œê±°ë‚˜, í˜ì´ì§€ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬ í•´ë‹¹ í˜ì´ì§€ì— ê¸°ë¡í•˜ì—¬ë„ ì¢‹ìŠµë‹ˆë‹¤!

í•˜ì§€ë§Œ, ê²°ê³¼ë¬¼ë§Œ ì˜¬ë¦¬ëŠ” ê²ƒì´ ì•„ë‹Œ, **ì¤‘ê°„ ê³¼ì • ëª¨ë‘ ê¸°ë¡í•˜ì…”ì•¼ í•œë‹¤ëŠ” ì !** ìŠì§€ ë§ì•„ì£¼ì„¸ìš”.

</aside>

- **ë¯¸ì…˜ ê¸°ë¡**
    
    ### 1. API ì‘ë‹µ í†µì¼ê³¼ ì—ëŸ¬ í•¸ë“¤ëŸ¬ ìˆ™ì§€í•˜ê¸°
    
    - ì‘ë‹µ í†µì¼êµ¬ì¡°
        - í•µì‹¬ í´ë˜ìŠ¤ `ApiResponse.java`
            
            ```java
            public class ApiResponse<T> {
                private final Boolean isSuccess;
                private final String code;
                private final String message;
                private T result;
            
                public static <T> ApiResponse<T> onSuccess(T result) { ... }
                public static <T> ApiResponse<T> onFailure(String code, String message, T data) { ... }
            }
            
            ```
            
        - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì–´ë–¤ APIë¥¼ í˜¸ì¶œí•˜ë“  **ë¬´ì¡°ê±´ `ApiResponse` í˜•ì‹ìœ¼ë¡œ ë¦¬í„´ë¨**
        - ì„±ê³µì´ë©´: `onSuccess(data)`
        - ì‹¤íŒ¨ë©´: `onFailure(code, message, null or ì—ëŸ¬ ìƒì„¸)`
    
    - ì—ëŸ¬ í•¸ë“¤ëŸ¬
        - ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ í´ë˜ìŠ¤
            
            ```java
            @RestControllerAdvice
            public class ExceptionAdvice extends ResponseEntityExceptionHandler {
                ...
            }
            
            ```
            
        - ë™ì‘ ë°©ì‹ ìš”ì•½
        
        | ì˜ˆì™¸ ì¢…ë¥˜ | ì²˜ë¦¬ ë°©ì‹ | ë°˜í™˜ êµ¬ì¡° |
        | --- | --- | --- |
        | `ConstraintViolationException` | Validation ì‹¤íŒ¨ | `ApiResponse.onFailure(...)` |
        | `MethodArgumentNotValidException` | DTO ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨ | `ApiResponse.onFailure(...)` |
        | `GeneralException` | ì»¤ìŠ¤í…€ ì˜ˆì™¸ (ì§ì ‘ ì •ì˜í•œ ì—ëŸ¬) | `ApiResponse.onFailure(...)` |
        | `Exception` | ê·¸ ì™¸ ëª¨ë“  ì˜ˆì™¸ | `ApiResponse.onFailure(...)` |
        
        ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
        
        `TempRestController.java` 
        
        ```java
        @GetMapping("/exception")
        public ApiResponse<TempExceptionDTO> exceptionAPI(@RequestParam Integer flag) {
            tempQueryService.CheckFlag(flag); // ì—¬ê¸°ì„œ GeneralException í„°ì§€ë©´
            return ApiResponse.onSuccess(...); // ì´ê±´ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
        }
        ```
        
        â†’ `CheckFlag(flag)` ì•ˆì—ì„œ ì¡°ê±´ì— ë”°ë¼ `throw new GeneralException()` ë°œìƒ
        
        â†’ `ExceptionAdvice`ì—ì„œ ê°€ë¡œì±„ì„œ `ApiResponse.onFailure(...)` ë¡œ ë³€í™˜
        â†’ í´ë¼ì´ì–¸íŠ¸ëŠ” ì˜ˆì™¸ê°€ ë‚˜ë„ í•­ìƒ JSON í˜•ì‹ ì‘ë‹µì„ ë°›ìŒ
        
        1ë²ˆ ë¬¸ì œ ìš”ì•½ ìˆ™ì§€ í¬ì¸íŠ¸
        
        - **ëª¨ë“  APIëŠ” `ApiResponse<T>` í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•œë‹¤.**
        - **ì—ëŸ¬ ìƒí™©ì€ `GeneralException`ì„ í†µí•´ ë°œìƒì‹œí‚¤ê³ ,**
        - **`ExceptionAdvice`ê°€ ëª¨ë“  ì˜ˆì™¸ë¥¼ í†µì¼ëœ JSONìœ¼ë¡œ ë°”ê¿”ì¤€ë‹¤.**
        - **ì‹¤ì œë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„±ê³µ/ì‹¤íŒ¨ êµ¬ë¶„ ì—†ì´ ë™ì¼í•œ í˜•ì‹ìœ¼ë¡œ ë¦¬í„´í•˜ë¯€ë¡œ API ì‘ë‹µ êµ¬ì¡°ê°€ ì¼ê´€ëœë‹¤.**

### 2ë²ˆê³¼ 3ë²ˆ

- ê¹ƒí—ˆë¸Œì— í”„ë¡œì íŠ¸ ì˜¬ë ¸ìŠµë‹ˆë‹¤.
- 3ë²ˆ ì‚¬ì§„
    - `ApiResponse.java`, `ErrorStatus.java` ì½”ë“œ í™”ë©´
        
        ![image.png](image%202.png)
        
    - `ExceptionAdvice.java`ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ ì¤‘ì¸ ì½”ë“œ(ì–‘ì´ ë§ì•„ ì²«ë²ˆì¨° ì‚¬ì§„ ë°‘ ì½”ë“œëŠ” ì½”ë“œë¸”ë¡ìœ¼ë¡œ ì‘ì„±)
        
        ![image.png](image%203.png)
        
        ```java
        package umc.study.exception;
        
        import jakarta.servlet.http.HttpServletRequest;
        import jakarta.validation.ConstraintViolationException;
        import lombok.extern.slf4j.Slf4j;
        import org.springframework.http.HttpHeaders;
        import org.springframework.http.HttpStatus;
        import org.springframework.http.HttpStatusCode;
        import org.springframework.http.ResponseEntity;
        import org.springframework.web.bind.MethodArgumentNotValidException;
        import org.springframework.web.bind.annotation.ExceptionHandler;
        import org.springframework.web.bind.annotation.RestController;
        import org.springframework.web.bind.annotation.RestControllerAdvice;
        import org.springframework.web.context.request.ServletWebRequest;
        import org.springframework.web.context.request.WebRequest;
        import org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;
        import umc.study.ApiPayload.ApiResponse;
        import umc.study.ApiPayload.code.ErrorReasonDTO;
        import umc.study.ApiPayload.code.status.ErrorStatus;
        
        import java.util.LinkedHashMap;
        import java.util.Map;
        import java.util.Optional;
        
        @Slf4j
        @RestControllerAdvice(annotations = {RestController.class})
        public class ExceptionAdvice extends ResponseEntityExceptionHandler {
        
            @ExceptionHandler
            public ResponseEntity<Object> validation(ConstraintViolationException e, WebRequest request) {
                String errorMessage = e.getConstraintViolations().stream()
                        .map(constraintViolation -> constraintViolation.getMessage())
                        .findFirst()
                        .orElseThrow(() -> new RuntimeException("ConstraintViolationException ì¶”ì¶œ ë„ì¤‘ ì—ëŸ¬ ë°œìƒ"));
        
                return handleExceptionInternalConstraint(e, ErrorStatus.valueOf(errorMessage), HttpHeaders.EMPTY,request);
            }
        
            @Override
            public ResponseEntity<Object> handleMethodArgumentNotValid(MethodArgumentNotValidException e, HttpHeaders headers, HttpStatusCode status, WebRequest request) {
        
                Map<String, String> errors = new LinkedHashMap<>();
        
                e.getBindingResult().getFieldErrors().stream()
                        .forEach(fieldError -> {
                            String fieldName = fieldError.getField();
                            String errorMessage = Optional.ofNullable(fieldError.getDefaultMessage()).orElse("");
                            errors.merge(fieldName, errorMessage, (existingErrorMessage, newErrorMessage) -> existingErrorMessage + ", " + newErrorMessage);
                        });
        
                return handleExceptionInternalArgs(e,HttpHeaders.EMPTY,ErrorStatus.valueOf("_BAD_REQUEST"),request,errors);
            }
        
            @ExceptionHandler
            public ResponseEntity<Object> exception(Exception e, WebRequest request) {
                e.printStackTrace();
        
                return handleExceptionInternalFalse(e, ErrorStatus._INTERNAL_SERVER_ERROR, HttpHeaders.EMPTY, ErrorStatus._INTERNAL_SERVER_ERROR.getHttpStatus(),request, e.getMessage());
            }
        
            @ExceptionHandler(value = GeneralException.class)
            public ResponseEntity onThrowException(GeneralException generalException, HttpServletRequest request) {
                ErrorReasonDTO errorReasonHttpStatus = generalException.getErrorReasonHttpStatus();
                return handleExceptionInternal(generalException,errorReasonHttpStatus,null,request);
            }
        
            private ResponseEntity<Object> handleExceptionInternal(Exception e, ErrorReasonDTO reason,
                                                                   HttpHeaders headers, HttpServletRequest request) {
        
                ApiResponse<Object> body = ApiResponse.onFailure(reason.getCode(),reason.getMessage(),null);
        //        e.printStackTrace();
        
                WebRequest webRequest = new ServletWebRequest(request);
                return super.handleExceptionInternal(
                        e,
                        body,
                        headers,
                        reason.getHttpStatus(),
                        webRequest
                );
            }
        
            private ResponseEntity<Object> handleExceptionInternalFalse(Exception e, ErrorStatus errorCommonStatus,
                                                                        HttpHeaders headers, HttpStatus status, WebRequest request, String errorPoint) {
                ApiResponse<Object> body = ApiResponse.onFailure(errorCommonStatus.getCode(),errorCommonStatus.getMessage(),errorPoint);
                return super.handleExceptionInternal(
                        e,
                        body,
                        headers,
                        status,
                        request
                );
            }
        
            private ResponseEntity<Object> handleExceptionInternalArgs(Exception e, HttpHeaders headers, ErrorStatus errorCommonStatus,
                                                                       WebRequest request, Map<String, String> errorArgs) {
                ApiResponse<Object> body = ApiResponse.onFailure(errorCommonStatus.getCode(),errorCommonStatus.getMessage(),errorArgs);
                return super.handleExceptionInternal(
                        e,
                        body,
                        headers,
                        errorCommonStatus.getHttpStatus(),
                        request
                );
            }
        
            private ResponseEntity<Object> handleExceptionInternalConstraint(Exception e, ErrorStatus errorCommonStatus,
                                                                             HttpHeaders headers, WebRequest request) {
                ApiResponse<Object> body = ApiResponse.onFailure(errorCommonStatus.getCode(), errorCommonStatus.getMessage(), null);
                return super.handleExceptionInternal(
                        e,
                        body,
                        headers,
                        errorCommonStatus.getHttpStatus(),
                        request
                );
            }
        }
        ```
        
    
    - Postmanì—ì„œ ì—ëŸ¬ ë°œìƒ í›„ `ApiResponse` í˜•ì‹ì˜ ì‘ë‹µ í™•ì¸ í™”ë©´
    
    ![image.png](image%204.png)
    
    ![image.png](image%205.png)
    
    ![image.png](image%206.png)
    
    ### 4. RestControllerAdviceì˜ ì¥ì , ê·¸ë¦¬ê³  ì—†ì„ ê²½ìš° ì–´ë–¤ ì ì´ ë¶ˆí¸í•œì§€ë„ ì¡°ì‚¬í•˜ì—¬ **ë¯¸ì…˜ ê¸°ë¡ë€**ì— ìˆ˜ë¡í•  ê²ƒ.
    
    ## `@RestControllerAdvice`ì˜ ì¥ì ê³¼ ë¯¸ì‚¬ìš© ì‹œ ë¶ˆí¸í•œ ì 
    
    ### `@RestControllerAdvice`ì˜ ì¥ì 
    
    1. ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ ê°€ëŠ¥
        - í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì—ì„œ ì „ì²´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ˆì™¸ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì½”ë“œ ì¤‘ë³µì„ ì¤„ì„
    2. ì‘ë‹µ í¬ë§· í†µì¼
        - ì–´ë–¤ ì—ëŸ¬ê°€ ë°œìƒí•˜ë”ë¼ë„ `ApiResponse` ê°™ì€ í†µì¼ëœ JSON êµ¬ì¡°ë¡œ ì‘ë‹µ ê°€ëŠ¥
            
            â†’ í”„ë¡ íŠ¸ì—”ë“œì™€ í˜‘ì—… ì‹œ ì¼ê´€ì„± ìˆê²Œ ì²˜ë¦¬ë¨
            
    3. ìœ ì§€ë³´ìˆ˜ ìš©ì´
        - ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ì´ í•œ ê³³ì— ì§‘ì¤‘ë˜ì–´ ìˆì–´ ìƒˆë¡œìš´ ì˜ˆì™¸ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê¸° ì‰¬ì›€
    4. ê°€ë…ì„±ê³¼ ë¶„ë¦¬
        - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” í•µì‹¬ ë¡œì§ì—ë§Œ ì§‘ì¤‘ ê°€ëŠ¥, ì˜ˆì™¸ ì²˜ë¦¬ëŠ” `Advice`ì—ì„œ ì „ë‹´
    5. ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ DI, íŠ¸ëœì­ì…˜ ë“± AOP ê¸°ëŠ¥ë„ í•¨ê»˜ ì²˜ë¦¬
    
    ### `@RestControllerAdvice` ì˜ ë‹¨ì 
    
    1. ì˜ˆì™¸ ì²˜ë¦¬ ì½”ë“œê°€ ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ì¤‘ë³µ
        - ê°™ì€ `try-catch` ë¡œì§ì´ ì—¬ëŸ¬ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë°˜ë³µë¨ â†’ ìœ ì§€ë³´ìˆ˜ ì§€ì˜¥
    2. ì‘ë‹µ í¬ë§·ì´ ë“¤ì­‰ë‚ ì­‰
        - ì–´ë–¤ APIëŠ” JSON, ì–´ë–¤ APIëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë§Œ ë˜ì§€ê±°ë‚˜ HTTP ìƒíƒœì½”ë“œë§Œ ë‹¤ë¦„ â†’ í”„ë¡ íŠ¸ ê°œë°œì ë©˜ë¶•
    3. ê¸°ëŠ¥ ì¶”ê°€/ë³€ê²½ì´ ì–´ë ¤ì›€
        - ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë³€ê²½í•˜ë ¤ë©´ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë‹¤ ë’¤ì ¸ì•¼ í•¨
    4. ë²„ê·¸ ë°œìƒ í™•ë¥  ì¦ê°€
        - ì¼ê´€ë˜ì§€ ì•Šì€ ì²˜ë¦¬ë¡œ ì¸í•´ ëˆ„ë½ëœ ì˜ˆì™¸ê°€ ì²˜ë¦¬ë˜ì§€ ì•Šê±°ë‚˜ ì˜ëª»ëœ ì‘ë‹µì´ ê°ˆ ìˆ˜ ìˆìŒ
    
    ### **5. ë¯¸ì…˜ ëª©ë¡ ì¡°íšŒ(ì§„í–‰ì¤‘, ì§„í–‰ ì™„ë£Œ) API ëª…ì„¸ì„œ** ì‘ì„±í•˜ê¸°
    
    ### ì§„í–‰ ì¤‘ ë¯¸ì…˜ ëª©ë¡ ì¡°íšŒ API
    
    | í•­ëª© | ë‚´ìš© |
    | --- | --- |
    | **URL** | `GET /users/{userId}/missions?status=ACTIVE` |
    | **Method** | GET |
    | **Path Variable** | `userId` (Long) - ìœ ì € ì‹ë³„ì |
    | **Query Params** | `status=ACTIVE` (ì§„í–‰ì¤‘) |
    
    ```java
    "mission": [
    	{
    	  "isSuccess": true,
    	  "code": "COMMON_SUCCESS",
    	  "message": "ìš”ì²­ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.",
    	  "result": [
    	    {
    	      "missionId": 1,
    	      "userId": 3,
    	      "missionName": "ë§ˆë¼íƒ• ë¨¹ê¸°",
    	      "description": "ì¼í’ˆ ë§ˆë¼íƒ•ì—ì„œ ë§ˆë¼íƒ•ë¨¹ê¸°",
    	      "createdAt": "2025-05-01T12:00:00",
    	      "updatedAt": "2025-05-10T10:30:00"
    	    }
    	  ]
    	}
    ]
    ```
    
    ### ì‘ë‹µ í•„ë“œ ì„¤ëª…
    
    | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
    | --- | --- | --- |
    | missionId | Long | ë¯¸ì…˜ì˜ ID |
    | userId | Long | ë¯¸ì…˜ì„ ë°›ì€ ì‚¬ìš©ìì˜ ID |
    | missionName | String | ë¯¸ì…˜ì˜ ì´ë¦„ |
    | description | String | ë¯¸ì…˜ ì„¤ëª… |
    | createdAt | LocalDateTime | ë¯¸ì…˜ ìƒì„± ì‹œê°„ |
    | updatedAt | LocalDateTime | ë¯¸ì…˜ ë³€ê²½ ì‹œê°„ |
    
    ### ì™„ë£Œëœ ë¯¸ì…˜ ëª©ë¡ ì¡°íšŒ API
    
    | í•­ëª© | ë‚´ìš© |
    | --- | --- |
    | **URL** | `GET /users/{userId}/missions?status=INACTIVE` |
    | **Method** | GET |
    | **Path Variable** | `userId` (Long) - ìœ ì € ì‹ë³„ì |
    | **Query Params** | `status=INACTIVE` (ì™„ë£Œë¨) |
    
    ```java
    {
      "isSuccess": true,
      "code": "COMMON_SUCCESS",
      "message": "ìš”ì²­ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.",
      "result": [
        {
          "missionId": 2,
          "userId": 3,
          "missionName": "ì™„ë£Œëœ ë¯¸ì…˜ ì˜ˆì‹œ",
          "description": "ë¯¸ì…˜ ì„¤ëª… ì˜ˆì‹œ",
          "createdAt": "2025-04-20T15:00:00",
          "updatedAt": "2025-05-01T09:00:00"
        }
      ]
    }
    ```
    
    ### ì‘ë‹µ í•„ë“œ ì„¤ëª…
    
    | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
    | --- | --- | --- |
    | missionId | Long | ë¯¸ì…˜ì˜ ID |
    | userId | Long | ë¯¸ì…˜ì„ ë°›ì€ ì‚¬ìš©ìì˜ ID |
    | missionName | String | ë¯¸ì…˜ì˜ ì´ë¦„ |
    | description | String | ë¯¸ì…˜ ì„¤ëª… |
    | createdAt | LocalDateTime | ë¯¸ì…˜ ìƒì„± ì‹œê°„ |
    | updatedAt | LocalDateTime | ë¯¸ì…˜ ë³€ê²½ ì‹œê°„ |

### ì°¸ê³ ì‚¬í•­

- ì‘ë‹µ í˜•ì‹ì€ ëª¨ë‘ `ApiResponse<T>` êµ¬ì¡°ë¥¼ ë”°ë¦„
- ì—ëŸ¬ ë°œìƒ ì‹œë„ ë™ì¼í•˜ê²Œ ì•„ë˜ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µë¨
    
    ```java
    {
      "isSuccess": false,
      "code": "MISSION_NOT_FOUND",
      "message": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¯¸ì…˜ì…ë‹ˆë‹¤.",
      "result": null
    }
    ```
    

### ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ ë° ì‘ë‹µ

- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì ID
    - 
    
    ```java
    {
      "isSuccess": false,
      "code": "USER_NOT_FOUND",
      "message": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤.",
      "result": null
    }
    ```
    
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¯¸ì…˜
    - 
    
    ```java
    {
      "isSuccess": false,
      "code": "MISSION_NOT_FOUND",
      "message": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¯¸ì…˜ì…ë‹ˆë‹¤.",
      "result": null
    }
    ```
    
- ì˜ëª»ëœ status íŒŒë¼ë¯¸í„°
    - 
    
    ```java
    {
      "isSuccess": false,
      "code": "INVALID_MISSION_STATUS",
      "message": "ìœ íš¨í•˜ì§€ ì•Šì€ ë¯¸ì…˜ ìƒíƒœì…ë‹ˆë‹¤. (ACTIVE, INACTIVE ì¤‘ í•˜ë‚˜)",
      "result": null
    }
    ```
    
- ì¸ì¦ì‹¤íŒ¨
    - 
    
    ```java
    {
      "isSuccess": false,
      "code": "UNAUTHORIZED",
      "message": "ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤.",
      "result": null
    }
    ```
    

> **github ë§í¬**
> 
> 
> 

[ì‹œë‹ˆì–´ ë¯¸ì…˜ ](%E1%84%89%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%20%E1%84%86%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%201e7b57f4596b81df9e38d5a1e30d6e78.md)

# âš¡ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

---

<aside>
ğŸ’¡ ì‹¤ìŠµí•˜ë©´ì„œ ìƒê¸´ ë¬¸ì œë“¤ì— ëŒ€í•´ì„œ, **ì´ìŠˆ - ë¬¸ì œ - í•´ê²°** ìˆœì„œë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

</aside>

<aside>
ğŸ’¡ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ê¸° ì–´ë µë‹¤ë©´? ìŠ¤í„°ë””ì›ë“¤ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ê±°ë‚˜ **ë„ˆë””ë„ˆë¦¬ì˜ ì§€ì‹IN ì±„ë„ì— ì§ˆë¬¸**í•´ë³´ì„¸ìš”!

</aside>

- âš¡ì´ìŠˆ ì‘ì„± ì˜ˆì‹œ (ì´ìŠˆê°€ ìƒê¸°ë©´ ì•„ë˜ë¥¼ ë³µì‚¬í•´ì„œ No.1, No.2, No3 â€¦ ìœ¼ë¡œ ì‘ì„±í•´ì„œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ê¼­ í•´ë³´ì„¸ìš”!)
    
    **`ì´ìŠˆ`**
    
    ğŸ‘‰ ì•± ì‹¤í–‰ ì¤‘ì— ë…¸ë˜ ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë‹ˆê¹Œ ì•±ì´ ì¢…ë£Œë˜ì—ˆë‹¤.
    
    **`ë¬¸ì œ`**
    
    ğŸ‘‰ ë…¸ë˜í´ë˜ìŠ¤ì˜ ë°ì´í„°ë¦¬ìŠ¤íŠ¸ì˜ Sizeë¥¼ ë„˜ì–´ì„œ NullPointExceptionì´ ë°œìƒí•˜ì—¬ ì•±ì´ ì¢…ë£Œëœ ê²ƒì´ì—ˆë‹¤. 
    
    **`í•´ê²°`**
    
    ğŸ‘‰  ë…¸ë˜ ë‹¤ìŒ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ë°ì´í„°ë¦¬ìŠ¤íŠ¸ì˜ Sizeë¥¼ ê²€ì‚¬í•´ Sizeë³´ë‹¤ ë„˜ì–´ê°€ë ¤ê³  í•˜ë©´ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³ , ì²« ë…¸ë˜ë¡œ ëŒì•„ê°€ê²Œë” í•´ê²°
    
    **`ì°¸ê³ ë ˆí¼ëŸ°ìŠ¤`**
    
    - ë§í¬
- âš¡ì´ìŠˆ No.1
    
    **`ì´ìŠˆ`**
    
    ğŸ‘‰ [íŠ¸ëŸ¬ë¸”ì´ ìƒê¸´ ìƒíƒœ ì‘ì„±]
    
    **`ë¬¸ì œ`**
    
    ğŸ‘‰ [ì–´ë–¤ ì´ìœ ë¡œ í•´ë‹¹ ì´ìŠˆê°€ ì¼ì–´ë‚¬ëŠ”ì§€ ì‘ì„±]
    
    **`í•´ê²°`**
    
    ğŸ‘‰  [í•´ê²° ë°©ë²• ì‘ì„±]
    
    **`ì°¸ê³ ë ˆí¼ëŸ°ìŠ¤`**
    
    - [ë¬¸ì œ í•´ê²° ì‹œ ì°¸ê³ í•œ ë§í¬]

---

Copyright Â© 2023 ìµœìš©ìš±(ë˜˜ì´) All rights reserved.

Copyright Â© 2024 ì œì´ë¯¸(ê¹€ì¤€í™˜) All rights reserved.