# 시니어 미션

![내가 진행중, 진행 완료한 미션 모아서 보는 쿼리(페이징 포함)](%E1%84%89%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%20%E1%84%86%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%201b7b57f4596b81c495bee8271d6fc305/Untitled.png)

내가 진행중, 진행 완료한 미션 모아서 보는 쿼리(페이징 포함)

- [ ]  미션 1(내가 진행중, 진행 완료한 미션 모아서 보는 쿼리(페이징 포함))에서 정렬 기준을 1순위는 포인트로 2순위는 최신순으로 하여 Cursor기반 페이지네이션을 구현해보세요
    - 내용들을 간단하게 정리하여주세요
        
        일단 기본 미션 테이블 세팅을 이렇게
        
        ```sql
        user_mission (
          id BIGINT,
          user_id BIGINT,
          mission_id BIGINT,
          point INT,
          participated_at DATETIME,
          status ENUM('진행중', '성공', '실패') 
        )
        ```
        
        - user_id가 **5번인 사용자**가 참여한 미션 중
        - 상태가 ‘진행중’ 또는 ‘성공’인 것만
        - 정렬은 **포인트 높은 순 → 최신순**
        - 커서 기반으로 **포인트 + 참여시간** 기준으로 이전 페이지 불러오기
        - 한번에 15개 조회
        
        ```sql
        SELECT um.*,
               CONCAT(LPAD(um.point, 10, '0'), DATE_FORMAT(um.participated_at, '%Y%m%d%H%i%s')) AS cursor_value
        FROM user_mission AS um
        WHERE um.user_id = 5 
          AND um.status IN ('진행중', '성공') 
          AND CONCAT(LPAD(um.point, 10, '0'), DATE_FORMAT(um.participated_at, '%Y%m%d%H%i%s')) < '000000050020250325140030'
        ORDER BY um.point DESC, um.participated_at DESC 
        LIMIT 15; 
        
        ```
        
- [x]  SQL Injection에 대해 조사하고 어떠할 때 일어나고 어떻게 막을 수 있는 지를 적어주세요
    - 내용들을 간단하게 정리하여 주세요
        
        코드 인젝션의 한 기법으로 클라이언트의 입력값을 조작하여 서버의 데이터베이스를 공격할 수 있는 해킹 기법임
        
        사용자가 입력한 데이터를 프로그램이 SQL 문법으로 인식했을 때 발생함. 특수문자 몇자로 발생할 수 있는 쉬운 공격 난이도에 비해 어마어마한 피해를 발생시킴.
        
        ### When?
        
        **입력값을 SQL 쿼리에 직접 넣을 때** 발생함.
        
        EX) 
        
        - 로그인 우회
        - 개인 정보 유출
        - 데이터베이스 테이블 삭제
        - 관리자 권한 탈취
        
        ### How Detective?
        
        <aside>
        
        ### 1.  **Prepared Statement (권장)**
        
        SQL에 파라미터를 안전하게 전달하는 방법.
        
        > SQL 문장과 데이터 입력값을 분리해서 처리
        > 
        
        ### 2. **ORM 사용 (Hibernate, JPA 등)**
        
        ORM을 사용하면 SQL을 직접 작성할 일이 줄어들고, 내부적으로 Prepared Statement를 사용함.
        
        ### 3. **입력값 검증 / 화이트리스트**
        
        - 입력값에 허용된 형식만 통과하도록 제한
        - 예: 숫자만 받아야 하는 필드에는 숫자 외 입력 불허
        
        ### **4. 출력 시 이스케이핑**
        
        DB 입력값을 HTML 등에 출력할 때는 **XSS**까지 고려해서 이스케이프 처리도 해주면 좋음.
        
        ### 5. **최소 권한 부여**
        
        - DB 계정에는 꼭 필요한 권한만 부여 (예: SELECT만 허용)
        - 데이터 삭제/수정이 가능한 쿼리는 관리자만 가능하게 분리
        </aside>
        
- [ ]  다양한 JOIN 방법들에 대해 찾아보고, 각 방식에 대해 비교하여 간단히 정리해주세요.
    - 내용들을 간단하게 정리하여 주세요
        
        
        | JOIN 종류 | 설명 | 기준 테이블의 데이터 포함 여부 | 대표 사용 예 |
        | --- | --- | --- | --- |
        | **INNER JOIN** | 양쪽 테이블에서 조건에 일치하는 데이터만 선택 | 조건 만족하는 것만 포함 | 교집합 찾기 |
        | **LEFT JOIN** | 왼쪽 테이블의 모든 데이터를 포함하고, 조건에 맞는 오른쪽 테이블 데이터를 붙임 |  왼쪽 전부 포함 | 기준 테이블이 중요할 때 |
        | **RIGHT JOIN** | 오른쪽 테이블의 모든 데이터를 포함하고, 조건에 맞는 왼쪽 테이블 데이터를 붙임 |  오른쪽 전부 포함 | 오른쪽이 기준일 때 |
        | **FULL OUTER JOIN** | 양쪽 테이블의 모든 데이터를 포함하고, 조건이 맞지 않으면 NULL로 표시 | 양쪽 모두 포함 | 전체 포함 관계 확인 |
        | **CROSS JOIN** | 두 테이블의 모든 행을 서로 조합 (카티션 곱) |  조건 없음, 전체 조합 | 테스트, 조합 생성 |