
## 💪 미션 기록

---

<aside>
🍀 미션 기록의 경우, 아래 미션 기록 토글 속에 작성하시거나, 페이지를 새로 생성하여 해당 페이지에 기록하여도 좋습니다!

하지만, 결과물만 올리는 것이 아닌, **중간 과정 모두 기록하셔야 한다는 점!** 잊지 말아주세요.

</aside>

- **미션 기록**
    
    api에 대해 워크북을 참고하여 공부를 진행했지만 막상 하려고 하니 어떻게 해야하는지 잘 몰라 api명세서 작성 가이드를 참고하려고 **인터넷을 참고**하였습니다. 링크는 아래 달아두겠습니다.
    
    https://cobinding.tistory.com/165
    
    1. **홈화면**
    2. **마이페이지 리뷰 작성**
    3. **미션 목록 조회(진행중, 진행완료)**
    4. **미션 성공 누르기**
    5. **회원 가입하기( 소셜 로그인 고려 X )**
    
    미션을 총 5가지의 문제로 나눌 수 있으며, 먼저 각 문제는 어떤 메서드를 사용해야하는지 부터 생각해보았습니다.
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
    
    1. 홈 화면
    
    ![image.png](image%204.png)
    
    현재 홈 화면을 보면 MY MISSION 섹션아래로 2개의 **내가 받은 미션들을 확인**할 수가 있습니다.
    
    각 미션을 자세히 살펴보면 
    
    **“반이학생마라탕” = 이름**
    
    **“D-7” = 남은 일 수**
    
    **“500 P” = 적립 포인트**
    
    **“미션 도전!” = 버튼**
    
    을 확인할 수 있으며, 이 화면에서 필요한 
    
    데이터는 미션ID, 이름, 남은 일수, 적립포인트, 미션 상태 등등의 필드가 필요하단 사실을 알 수 있습니다.
    
    또한 상단 “미션 10개 달성 시 1,000 P”라는 
    
    부분을 참고하여 
    
    1. 사용자가 달성한 미션 수
    2. 적립포인트
    
    또한 포함시켜야한다고 생각하였습니다.
    
    1. GET : 조회
    2. POST : 생성
    3. PUT : 갱신(전체)
    4. PATCH : 갱신(일부)
    5. DELETE : 삭제
    
    중 **GET** 메서드로 사용자의 미션 목록을 조회하는 API가 필요하다고 생각하였습니다.
    
    **API 설계**
    
    ```bash
    GET/api/users/{user-id}/missions?status=before-starting&type=member
    
    = 사용자 미션 현황 및 목록
    ```
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
    
    1. **마이페이지 리뷰 작성**
    
    ![image.png](image%205.png)
    
    문제의 의도를 잘 이해못하여 곰곰히 생각해본 저의 생각에 따르면…ㅠ
    
    리뷰작성이 아닌 마이페이지 리뷰 작성
    
    이라고 적혀있어 .fig파일의 WF를 봤지만
    
    리뷰와 관련해서 있는 사진이 좌측의 사진이 끝이라 “**마이페이지**”리뷰작성은
    
    마이페이지에서 내가 적은 가게의 리뷰를 보는 기능이라고 생각하여 그렇게 작성하도록 하겠습니다.
    
    좌측 사진의 리뷰를 확인해보면
    
    1. “닉네임1234” = 닉네임
    2. “반이학생마라탕마라반” = 가게이름
    3. “★ 4.5” = 별점
    4. “음 너무 맛있어요~~~…” = 내용
    5. “■” = 사진
    
    등등의 정보를 알 수 있습니다.
    
    리뷰 작성 API는 **POST** 메서드로 구현했으며,
    
    요청 body에는 사용자의 ID, 가게ID, 별점, 내용, 이미지 등을 포함해야한다고 생각합니다.
    
    2주차 과제의 데이터베이스 스키마를 생각해보면 리뷰테이블에 
    
    1. user_id 
    2. store_id
    3. rating
    4. content
    5. picture
    6. created_at과 updated_at
    
    필드가 필요할 것이고, 이미지는 여러개 올릴 수 있으니까 배열로 처리해야합니다.
    
    **API 설계**
    
    ```bash
    POST/api/users/{user-id}/reviews
    ```
    
    ```jsx
    **Request** **Body
    
    {
    “id” : “int”,
    “store_id” : “int”,
    “rating” : “int”,
    “content” : “string”,
    “picture” : {“url”,"url"} // 여기서 약간의 혼동이 있었습니다. 그 이유는 아래에 기재했습니다.
    }**
    ```
    
    ```java
    {
      "images": [
        { "url": "https://example.com/image1.png" },
        { "url": "https://example.com/image2.png" }
      ]
    }
    
    ```
    
    처음 “picture” = “url”로 적었지만 이미지를 여러개 올릴 수 있다는 생각에 array로 사용하려고
    
    “picture” = “array”
    
    +”picture”:”url[]”
    
     라고 적었지만 이 코드의 문제는 ”url[]”는 단순히 문자열로 인식된다는 문제점이 있으며, 실제로 사진 URL을 여러개 넣을 수 없다는 사실을 알게 되었습니다.
    
    배열 사용은 맞는 []문법은 필수인 건 맞지만 url[]표기는 금지라는 사실을 알게 되어 
    
    “picture” = “url[]”로 기재하게 되었습니다.
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
    
    1. **미션 목록 조회 (진행 중, 진행 완료)**
    
    ![image.png](image%206.png)
    
    ![image.png](image%207.png)
    
    이 사진들을 보면 알 수 있듯이 진행 중, 진행완료 두 가지의 미션 목록을 조회할 수 있습니다.
    
    “조회”의 영역이기 때문에 GET 메소드를 사용하는 것이 맞다고 판단했으며, 
    
    1. 진행 중
    2. 진행완료
    
    로 2가지로 나누어 
    
    api endpoint를 적어보겠습니다. 
    
    이번엔 json파일의 예시도 
    
    이해를 돕기위해 적어보았습니다.
    
    **API 설계**
    
    1. 미션 목록 조회 ( 진행 중 상태일 때 )
    
    ```bash
    GET/api/users/{user-id}/missions?status=doing
    ```
    
    ```json
    Request Body
    
    {
    "id": "int",
    "title": "string",
    "status": "string", // 진행 중 string도 가능하며 0과 1로 표현하는 int도 가능
    "reward": "int",
    "created_at": "string"
    }
    ```
    
    1. 미션 목록 조회 ( 진행 완료 상태일 때)
    
    ```bash
    GET/api/users/{user-id}/missions?status=complete
    ```
    
    ```json
    Request Body
    
    {
    "id": "int",
    "title": "string",
    "status": "string", // 진행 중 string도 가능하며 0과 1로 표현하는 int도 가능
    "reward": "int",
    "created_at": "string"
    }
    ```
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
    
    1. **미션 성공 누르기**
    
    ![image.png](image%208.png)
    
    또한 미션 인증번호가 있는 걸로 보아 인증 관련 로직도 구현해야함을 알 수 있습니다.
    
    왼쪽의 사진을 보면 ‘성공 요청’ 버튼과
    
    ‘미션 완료!’ 문자가 포함되있고, 이를통해
    
    사용자가 미션 성공 시 서버에 성공 요청을
    
    보내고, 해당 미션의 상태를 변경해야함을 
    
    알 수 있습니다.
    
    미션 성공 API는 POST와 PATCH 둘 중 하나의 메서드를 사용해야하며, 요청시 미션 ID를 받아 해당 미션의 상태를 complete로 변경하는 과정이 필요합니다.
    
    더 나아가 변경된 데이터를 저장하기 위해 JSON파일을 업데이트 하는 과정이 포함되어야합니다.
    
    ```bash
    PATCH/api/users/{user-id}/missions/{mission-id}
    ```
    
    ```jsx
    Request Body
    
    {
      "auth_number": "int", // 사진에 있는 번호
      "complete_reason": "string" // "완료"같은 string이나 0과 1인 int 표현도 가능
    }
    ```
    
    +a PATCH를 통한 인증번호 성공 api endpoint도 구현해보았습니다.
    
    ```bash
    PATCH /api/users/{user-id}/missions/{mission-id}
    Headers: Content-Type: application/json
    Body: { "auth_number": "int" } // 사진 인증번호 예시
    ```
    
    +b 엔드포인트 구조는 봤을 때 이해가 된다는 선에서 최대한 간결한게 좋다고 하여 {user-id}가
    
    미션 데이터에 이미 포함되어 있다면 중복되게 되므로 간단하게 표현하게 된다면
    
    ```bash
    PATCH/api/missions/{mission-id}
    ```
    
    으로 표현 할 수도 있겠다고 생각하여 추가로 기재해보았습니다.
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ**ㅡ**
    
    1. **회원가입하기 ( 소셜 로그인 고려 X )**
    
    ![image.png](image%209.png)
    
    ![image.png](image%2010.png)
    
    위 워크북에서 배운대로 POST/user으로 표현이 가능하지만 로그인을 POST/users로 표현하기 힘들어
    
    너무 타이트하게 RESTful한 API 설계를 따르려고 하지 않고 
    
    ```bash
    POST/users/login
    ```
    
    으로 표현해도 된다고 함으로써 
    
    5번문제 회원가입 외에도 저의 얄팍한(ㅠ.ㅠ) 지식으로
    
    로그인 API까지 구현해보도록 하겠습니다.
    
    **API 설계**
    
    1. **회원가입 API**
    
    ```bash
    POST/users
    ```
    
    ```bash
    Request Body
    
    {
    	"id" : "int"
    	"name" : "string"
    	"gender" : "int" // 남자,여자 문자열 string도 가능하며 0과 1로 표현하는 int도 가능
    	"birthday" : "string"
    	"adress" : "string"
    }
    ```
    
    1. **로그인 API ( 소셜(?) 이메일 로그인으로 가정 )**
    
    ```bash
    POST/users/login
    ```
    
    ```bash
    Request Body
    
    {
    	"email" : "string"
    	"password" : "string"
    }
    ```
    
    - 로그인 API는 js의 bcrypt 사용이나 비밀번호는 해시 처리하여 저장한다던지, 로그인 시 JWT 토큰을 발급하는 방식등 많은 방식 등등 다른 방법들로 보안 처리가 필수긴 하지만 아직 지식이 없어 배제하도록 하겠습니다
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
    

## ⚡ 트러블 슈팅

---

<aside>
💡 실습하면서 생긴 문제들에 대해서, **이슈 - 문제 - 해결** 순서로 작성해주세요.

</aside>

<aside>
💡 스스로 해결하기 어렵다면? 스터디원들에게 도움을 요청하거나 **너디너리의 지식IN 채널에 질문**해보세요!

</aside>

- ⚡이슈 작성 예시 (이슈가 생기면 아래를 복사해서 No.1, No.2, No3 … 으로 작성해서 트러블 슈팅을 꼭 해보세요!)
    
    **`이슈`**
    
    👉 앱 실행 중에 노래 다음 버튼을 누르니까 앱이 종료되었다.
    
    **`문제`**
    
    👉 노래클래스의 데이터리스트의 Size를 넘어서 NullPointException이 발생하여 앱이 종료된 것이었다. 
    
    **`해결`**
    
    👉  노래 다음 버튼을 눌렀을 때 데이터리스트의 Size를 검사해 Size보다 넘어가려고 하면 다음으로 넘어가는 메서드를 실행시키지 않고, 첫 노래로 돌아가게끔 해결
    
    **`참고레퍼런스`**
    
    - 링크
- ⚡이슈 No.1
    
    **`이슈`**
    
    👉 [트러블이 생긴 상태 작성]
    
    **`문제`**
    
    👉 [어떤 이유로 해당 이슈가 일어났는지 작성]
    
    **`해결`**
    
    👉  [해결 방법 작성]
    
    **`참고레퍼런스`**
    
    - [문제 해결 시 참고한 링크]
- 

## 🤔 참고 자료

[3주차](3%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%201b7b57f4596b816b875edec0f5e2911a.csv)

---

Copyright © 2023 최용욱(똘이) All rights reserved.

Copyright © 2024, 2025 김준환(제이미) All rights reserved.